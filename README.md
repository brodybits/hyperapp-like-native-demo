# Hyperapp micro rewrite demo on React Native

based on code generated by `react-native init`

by Christopher J. Brody aka @brodybits (Chris Brody)

LICENSE: ISC OR MIT

## About

Simple counter app on React Native with mini rewrite of Hyperapp state/action management, inspired by Hyperapp demo in <https://github.com/hyperapp/hyperapp#getting-started>

MOTIVATION:

- <https://github.com/hyperapp/hyperapp/issues/168> - desire to use Hyperapp API on React Native
- <https://medium.com/hyperapp/hyperapp-for-redux-refugees-2507c9dd1ddc>
- <https://github.com/hyperapp/hyperapp/issues/641> (desire to use Ultradom as a dependency), especially rejected idea in <https://github.com/hyperapp/hyperapp/issues/641#issuecomment-376445893> (remove VDOM from Hyperapp)

See also: <https://github.com/brodybits/hyperapp-api-demo-on-inferno-and-ultradom> - prototypic rewrite of Hyperapp state/action management working with functional (stateless) components on multiple VDOM APIs: Inferno (React API) and Ultradom

## Build and run

First step: `npm install`

Android: `react-native run-android`

iOS: `react-native run-ios` or open `ios/hyperappMiniRewriteDemoOnReactNative.xcodeproj` and run from Xcode

## Quick tour

Initial state and actions from <https://github.com/brodybits/hyperapp-api-demo-on-inferno-and-ultradom> (inspired by Hyperapp demo app in <https://github.com/hyperapp/hyperapp#getting-started>):

```js
const initState = { count: 0 }

const actions = {
    increase: (value) => (state) => ({ count: state.count + value }),
    decrease: (value) => (state) => ({ count: state.count - value }),
}
```

JSX view function for React Native:

```jsx
const renderAppView =
  (state, actions) => {
    return (
      <View style={styles.container}>
        <Text style={styles.welcome}>
          Hyperapp micro rewrite demo on React Native
        </Text>
        <Button
          onPress={() => actions.increase(1)}
          title="Up (+1)"
        />
        <Text style={styles.welcome}>
          {state.count}
        </Text>
        <Button
          onPress={() => actions.decrease(1)}
          title="Down (-1)"
        />
      </View>
    )
  }
```

App component with support for Hyperapp action/state/view API:

```js
export default class App extends Component<{}> {
  constructor(props) {
    super(props)

    this.state = initState

    const self = this
    this.actions = {}
    for (let a in actions) this.actions[a] = (v) => {
      self.setState(prevState => (actions[a](v)(prevState)))
    }
  }
  render() {
    return renderAppView(this.state, this.actions)
  }
}
```


## TODO

**MAJOR:**

- [Dealing with "effects" (side effects) such as I/O & delay timers (brodybits/hyperapp-api-demo-on-inferno-and-ultradom#4)](https://github.com/brodybits/hyperapp-api-demo-on-inferno-and-ultradom/issues/4)

Others:

- [(BREAKING) View API changes from "Hyperapp 2.0", hopefully closer to standard functional component API (brodybits/hyperapp-api-demo-on-inferno-and-ultradom#5)](https://github.com/brodybits/hyperapp-api-demo-on-inferno-and-ultradom/issues/5)
- [CC0 (public domain) API specification (brodybits/hyperapp-api-demo-on-inferno-and-ultradom#1)](https://github.com/brodybits/hyperapp-api-demo-on-inferno-and-ultradom/issues/1)
- demo on <https://github.com/dabbott/react-native-web-player>
- TodoMVC app, likely based on <https://github.com/dangvanthanh/hyperapp-todomvc>
- better styling
